<div class="abilities-section">
  <h2>🌟 Habilidades Especiais</h2>
  
  {{!-- Controles de Habilidades --}}
  <div class="abilities-controls">
    <button type="button" class="item-create" data-type="habilidade">
      <i class="fas fa-plus"></i> Adicionar Habilidade
    </button>
  </div>

  {{!-- Lista de Habilidades --}}
  <div class="abilities-list">
    {{#each habilidades as |ability i|}}
    <div class="item ability-item" data-item-id="{{ability._id}}">
      <div class="item-image">
        <img src="{{ability.img}}" title="{{ability.name}}" width="32" height="32"/>
      </div>
      <div class="item-details">
        <div class="item-name">
          <h4>{{ability.name}}</h4>
          <div class="ability-stats">
            <span class="ability-type">{{ability.system.categoria}}</span>
            {{#ifGreater ability.system.usos 0}}
            <span class="ability-uses">{{ability.system.usosAtual}}/{{ability.system.usos}} usos</span>
            {{/ifGreater}}
          </div>
        </div>
        <div class="ability-description">
          <p>{{truncate ability.system.descricao 150}}</p>
        </div>
        {{#if ability.system.prerequisitos}}
        <div class="ability-prerequisites">
          <strong>Pré-requisitos:</strong> {{ability.system.prerequisitos}}
        </div>
        {{/if}}
      </div>
      <div class="item-controls">
        <a class="item-control item-roll" title="Usar Habilidade">
          <i class="fas fa-star"></i>
        </a>
        {{#ifGreater ability.system.usos 0}}
        <a class="item-control reset-uses" title="Resetar Usos">
          <i class="fas fa-redo"></i>
        </a>
        {{/ifGreater}}
        <a class="item-control item-edit" title="Editar">
          <i class="fas fa-edit"></i>
        </a>
        <a class="item-control item-delete" title="Deletar">
          <i class="fas fa-trash"></i>
        </a>
      </div>
    </div>
    {{/each}}
  </div>

  {{!-- Seção de Tipos de Habilidade --}}
  <div class="ability-types">
    <h3>🎯 Tipos de Habilidade</h3>
    <div class="types-grid">
      <div class="type-item">
        <h4>Passiva</h4>
        <p>Sempre ativa, sem custo</p>
      </div>
      <div class="type-item">
        <h4>Ativa</h4>
        <p>Deve ser ativada intencionalmente</p>
      </div>
      <div class="type-item">
        <h4>Reação</h4>
        <p>Ativada como resposta a eventos</p>
      </div>
      <div class="type-item">
        <h4>Movimento</h4>
        <p>Ativada durante movimento</p>
      </div>
    </div>
  </div>

  {{!-- Lista Numerada das Habilidades --}}
  <div class="abilities-numbered">
    <h3>📋 Lista Numerada</h3>
    <div class="numbered-list">
      {{#each habilidades as |ability i|}}
      <div class="numbered-item">
        <span class="item-number">{{add i 1}}.</span>
        <span class="item-name">{{ability.name}}</span>
      </div>
      {{/each}}
      
      {{!-- Slots vazios para completar 8 habilidades --}}
      {{#times (subtract 8 habilidades.length)}}
      <div class="numbered-item empty">
        <span class="item-number">{{add habilidades.length (add @index 1)}}.</span>
        <span class="item-name">-</span>
      </div>
      {{/times}}
    </div>
  </div>

  {{!-- Resumo de Habilidades --}}
  {{#if habilidades}}
  <div class="abilities-summary">
    <h3>📊 Resumo de Habilidades</h3>
    <div class="summary-stats">
      <div class="summary-item">
        <strong>Habilidades Conhecidas:</strong>
        <span>{{habilidades.length}}</span>
      </div>
      <div class="summary-item">
        <strong>Habilidades Passivas:</strong>
        <span>{{#each habilidades}}{{#ifEquals system.categoria "Passiva"}}1{{/ifEquals}}{{/each}}</span>
      </div>
      <div class="summary-item">
        <strong>Habilidades Ativas:</strong>
        <span>{{#each habilidades}}{{#ifEquals system.categoria "Ativa"}}1{{/ifEquals}}{{/each}}</span>
      </div>
    </div>
  </div>
  {{/if}}

</div> 